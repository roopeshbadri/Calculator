<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HTML Calculator</title>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
      integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <style>
      .calc-btn {
        width: 50px;
        height: 50px;
        font-size: 1em;
      }
      .calc-display {
        background-color: gray;
        color: white;
        height: 100px;
        width: 290px;
        border-radius: 5px;
      }
      .inputString {
        margin-top: 5px;
        font-size: 20px;
        height: 20px;
        display: block;
      }
      .expressionString {
        margin-top: 5px;
        font-size: 20px;
        height: 20px;
        display: block;
      }
      .valueString {
        margin-top: 5px;
        font-size: 20px;
        height: 20px;
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container p-6">
      <div class="d-flex justify-content-center">
        <div class="col-sm-12 col-md-4 col-lg-4">
          <div class="card">
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div
                  class="col-sm-12 col-md-12 col-lg-12 col-xl-12 calc-display"
                >
                  <div id="number_div" class="inputString">0</div>
                  <div id="expression_div" class="expressionString"></div>
                  <div id="value_div" class="valueString"></div>
                </div>
                <input type="hidden" id="savedExpression" />
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn d-flex justify-content-center align-items-center"
                    style="font-size: small"
                    data-event_key="NumLock"
                  >
                    <small>Num Lock</small>
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="Delete"
                  >
                    CE
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="Delete"
                  >
                    DEL
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="/"
                  >
                    /
                  </button>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="7"
                  >
                    7
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="8"
                  >
                    8
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="9"
                  >
                    9
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="*"
                  >
                    x
                  </button>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="4"
                  >
                    4
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="5"
                  >
                    5
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="6"
                  >
                    6
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="-"
                  >
                    -
                  </button>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="1"
                  >
                    1
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="2"
                  >
                    2
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="3"
                  >
                    3
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="+"
                  >
                    +
                  </button>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-center align-items-center">
              <div class="row p-3">
                <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    style="width: 150px"
                    data-event_key="0"
                  >
                    0
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn mx-0"
                    data-event_key="."
                  >
                    .
                  </button>
                </div>
                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                  <button
                    type="button"
                    class="btn btn-light calc-btn"
                    data-event_key="="
                  >
                    =
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script src="vendor/bootstrap/js/bootstrap.js"></script>
    <script>
      $(document).on("keypress", function (e) {
        $('button[data-event_key="' + e.key + '"]').addClass("active");
        if (
          (e.keyCode >= 48 && e.keyCode <= 57) ||
          (e.keyCode >= 96 && e.keyCode <= 105)
        ) {
          appendNumber(e.key);
        } else {
          if (e.key == "+" || e.key == "-" || e.key == "/" || e.key == "*") {
            generateExpression(e.key);
          } else if (e.key == "=") {
            evaluateExpression();
          } else if (e.key == "Delete") {
            clearCalc();
          }
        }
        console.log(e.key);
      });
      $(document).on("keyup", function (e) {
        $('button[data-event_key="' + e.key + '"]').removeClass("active");
        console.log(e.key);
      });
      $(".calc-btn").on("click", function (e) {
        var key = $(this).data("event_key");
        if (
          key != "." &&
          key != "=" &&
          key != "+" &&
          key != "-" &&
          key != "*" &&
          key != "/" &&
          key != "Delete" &&
          key != "NumLock"
        ) {
          appendNumber(key);
        } else {
          if (key == "+" || key == "-" || key == "/" || key == "*") {
            generateExpression(key);
          } else if (key == "=") {
            evaluateExpression();
          } else if (key == "Delete") {
            clearCalc(key);
          } else if (key == "CE") {
            clearCalc();
          }
        }
        console.log(key);
      });
      function appendNumber(number) {
        var existingnumber = $("#number_div").html();
        var currentnumber = number;
        var outputnumber = "";
        if (
          existingnumber != "" &&
          existingnumber != undefined &&
          existingnumber != null
        ) {
          if (existingnumber == 0) {
            outputnumber = number;
          } else {
            outputnumber = existingnumber += currentnumber;
          }
        } else {
          outputnumber = currentnumber;
        }
        $("#number_div").html(outputnumber);
      }

      function generateExpression(operator) {
        var existingnumber = $("#number_div").html();
        var currentoperator = operator;
        var expression = "";
        var savedExpression = $("#savedExpression").val();
        if (
          savedExpression == "" ||
          savedExpression == null ||
          savedExpression == "undefined"
        ) {
          expression = parseInt(existingnumber) + operator;
        } else {
          expression = savedExpression + existingnumber + operator;
        }
        $("#number_div").html("");
        $("#savedExpression").val(expression);
        $("#expression_div").html(expression);
      }
      function evaluateExpression() {
        var result = "";
        var expression = $("#savedExpression").val();
        var existingnumber = $("#number_div").html();
        if (
          existingnumber != "" ||
          existingnumber != null ||
          existingnumber != undefined
        ) {
          expression = expression + parseInt(existingnumber);
          $("#expression_div").html(expression);
        }
        result = eval(expression);
        $("#savedExpression").val("");
        $("#number_div").html(result);
        $("#value_div").html(result);
      }
      function clearCalc() {
        $("#number_div").html();
        $("#savedExpression").val();
        $("#expression_div").html();
        $("#value_div").html();
      }
    </script>
  </body>
</html>
